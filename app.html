<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>POST 検証</title>
  <script src="./env.js"></script>
</head>
<body>

<h2>GAS POST 検証</h2>
<button id="btn">POST送信</button>
<pre id="log"></pre>

<script>
const log = msg => {
  document.getElementById('log').textContent += msg + "\n";
};

document.getElementById('btn').onclick = async () => {
  try {
    const res = await fetch(API_URL, {
      method: 'POST',
      body: JSON.stringify({ test: 'hello' })
    });

    log("fetch 成功");
    log("status: " + res.status);

    const text = await res.text();
    log("response: " + text);

  } catch (e) {
    log("fetch 失敗: " + e);
  }
};
</script>

</body>
</html>
